@reference "tailwindcss"

@layer components {
  .btn-primary {
    /* Use brand tokens */
    @apply rounded-md px-4 py-2 font-medium transition-colors shadow-sm;
    background-color: var(--brand-primary);
    color: var(--brand-primary-contrast);
    border: 1px solid var(--brand-primary);
  }
  .btn-primary:hover {
    background-color: color-mix(in oklab, var(--brand-primary) 85%, white 15%);
  }
  .btn-primary:active {
    transform: translateY(1px);
  }

  .btn-ghost {
    @apply rounded-md border border-transparent px-4 py-2 font-medium transition-colors;
    color: var(--brand-primary);
    background-color: transparent;
  }
  .btn-ghost:hover {
    background-color: color-mix(in oklab, var(--brand-primary) 10%, var(--brand-surface) 90%);
    color: var(--brand-primary);
  }

  .card {
    @apply relative overflow-hidden rounded-lg shadow-md;
    background-color: var(--brand-surface);
    color: var(--brand-fg);
  }

  .card .hero-overlay {
    @apply pointer-events-none absolute inset-0;
    background-color: var(--brand-overlay-muted);
  }

  .headline-style {
    @apply font-heading tracking-wide text-[var(--brand-accent)] drop-shadow-sm;
  }

  .body-style {
    @apply font-body text-[var(--brand-primary-contrast)] drop-shadow-sm;
  }
}

@layer utilities {
  .max-w-site {
    max-width: var(--layout-max-width);
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* Fade-in animations */
  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fade-in-down {
    0% {
      opacity: 0;
      transform: translateY(-8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in-up {
    animation: fade-in-up 500ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }
  .animate-fade-in-down {
    animation: fade-in-down 500ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }
  @keyframes fade-in-opacity {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .animate-fade-in-opacity {
    animation: fade-in-opacity 300ms ease-out both;
  }

  /* Strong entrance from the very top of the page */
  @keyframes slide-in-from-top {
    0% {
      opacity: 0;
      /* Start above the header and slide down into place (distance equals header height) */
      transform: translateY(calc(-1 * var(--header-height-px, 64px)));
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-slide-in-from-top {
    animation: slide-in-from-top 600ms cubic-bezier(0.22, 1, 0.36, 1) both;
    will-change: transform, opacity;
    backface-visibility: hidden;
  }

  /* Marquee animations */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-marquee {
    animation: marquee 20s linear infinite;
    will-change: transform;
  }

  .animate-marquee-single {
    animation: marquee-single var(--marquee-duration) linear infinite;
    animation-delay: var(--marquee-delay);
    will-change: transform;
  }

  .animate-marquee-intro {
    animation: marquee-intro var(--marquee-duration) linear both;
    will-change: transform;
  }

  .marquee-viewport {
    position: relative;
    width: 100%;
  }
  .marquee-track {
    display: inline-flex;
    white-space: nowrap;
    gap: var(--marquee-gap);
  }

  @keyframes marquee-single {
    from {
      transform: translate3d(0, 0, 0);
    }
    to {
      transform: translate3d(calc(-1 * (var(--content-width) + var(--marquee-gap))), 0, 0);
    }
  }

  @keyframes marquee-intro {
    from {
      transform: translate3d(calc(var(--container-width) - 1%), 0, 0);
    }
    to {
      transform: translate3d(calc(-1 * var(--content-width)), 0, 0);
    }
  }

  /* Announcement banner border glow */
  @keyframes annc-border-glow {
    0%, 100% {
      box-shadow:
        0 1px 8px 0 color-mix(in oklab, var(--brand-border) 60%, transparent),
        0 0 0 0 color-mix(in oklab, var(--brand-accent) 0%, transparent);
    }
    50% {
      box-shadow:
        0 2px 14px 2px color-mix(in oklab, var(--brand-border) 70%, transparent),
        0 0 18px 4px color-mix(in oklab, var(--brand-accent) 60%, transparent);
    }
  }
  .annc-border-glow {
    position: relative;
  }
  .annc-border-glow::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    animation: annc-border-glow 2400ms ease-in-out infinite;
    will-change: box-shadow;
  }

  /* Generic element border glow (applies animation to the element itself) */
  .border-glow {
    animation: annc-border-glow 2400ms ease-in-out infinite;
    will-change: box-shadow;
  }

  /* Shake nudge animation */
  @keyframes nudge-shake {
    0% { transform: translateX(0) rotate(0); }
    15% { transform: translateX(-2px) rotate(-1deg); }
    30% { transform: translateX(2px) rotate(1deg); }
    45% { transform: translateX(-2px) rotate(-1deg); }
    60% { transform: translateX(2px) rotate(1deg); }
    75% { transform: translateX(-1px) rotate(0.5deg); }
    100% { transform: translateX(0) rotate(0); }
  }
  .animate-shake {
    animation: nudge-shake 800ms ease-in-out 3;
    transform-origin: center;
    will-change: transform;
  }

  /* Shimmer text animation for announcement banner */
  @keyframes shimmer-sweep {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  .shimmer-text {
    /* Base gradient is the brand accent with a moving lighter band */
    background-image: linear-gradient(
      100deg,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 0%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 40%,
      color-mix(in oklab, var(--brand-accent) 60%, white 40%) 50%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 60%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 100%
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    /* Make the gradient define the text color */
    color: transparent;
    -webkit-text-fill-color: transparent;
    animation: shimmer-sweep 2.2s linear infinite;
  }
  /* Slower variant for long, subtle shimmer (e.g., site title) */
  .shimmer-text-slow {
    background-image: linear-gradient(
      100deg,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 0%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 40%,
      color-mix(in oklab, var(--brand-accent) 60%, white 40%) 50%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 60%,
      color-mix(in oklab, var(--brand-accent) 95%, white 5%) 100%
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
    animation: shimmer-sweep 12s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-marquee,
    .animate-marquee-single,
    .animate-marquee-intro {
      animation-duration: 0.01ms;
      animation-iteration-count: 1;
    }
    .animate-fade-in-up,
    .animate-fade-in-down,
    .animate-fade-in-opacity,
    .animate-slide-in-from-top,
    .animate-shake,
    .annc-border-glow,
    .annc-border-glow::after,
    .border-glow,
    .shimmer-text,
    .shimmer-text-slow {
      animation: none;
      opacity: 1 !important;
      transform: none !important;
      /* In reduced motion, fall back to static text color */
      background-image: none !important;
      color: var(--brand-accent) !important;
      -webkit-text-fill-color: var(--brand-accent) !important;
    }
  }
}

