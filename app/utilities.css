@reference "tailwindcss"

@layer components {
  .btn-primary {
    /* Use brand tokens */
    @apply rounded-md px-4 py-2 font-medium transition-colors shadow-sm;
    background-color: var(--brand-primary);
    color: var(--brand-primary-contrast);
    border: 1px solid var(--brand-primary);
  }
  .btn-primary:hover {
    background-color: color-mix(in oklab, var(--brand-primary) 85%, white 15%);
  }
  .btn-primary:active {
    transform: translateY(1px);
  }

  .btn-ghost {
    @apply rounded-md border border-transparent px-4 py-2 font-medium transition-colors;
    color: var(--brand-primary);
    background-color: transparent;
  }
  .btn-ghost:hover {
    background-color: color-mix(in oklab, var(--brand-primary) 10%, var(--brand-surface) 90%);
    color: var(--brand-primary);
  }

  .card {
    @apply relative overflow-hidden rounded-lg shadow-md;
    background-color: var(--brand-surface);
    color: var(--brand-fg);
  }

  .card .hero-overlay {
    @apply pointer-events-none absolute inset-0;
    background-color: var(--brand-overlay-muted);
  }
}

@layer utilities {
  .max-w-site {
    max-width: var(--layout-max-width);
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* Fade-in animations */
  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fade-in-down {
    0% {
      opacity: 0;
      transform: translateY(-8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in-up {
    animation: fade-in-up 500ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }
  .animate-fade-in-down {
    animation: fade-in-down 500ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }
  @keyframes fade-in-opacity {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .animate-fade-in-opacity {
    animation: fade-in-opacity 300ms ease-out both;
  }

  /* Strong entrance from the very top of the page */
  @keyframes slide-in-from-top {
    0% {
      opacity: 0;
      /* Start above the header and slide down into place (distance equals header height) */
      transform: translateY(calc(-1 * var(--header-height-px, 64px)));
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-slide-in-from-top {
    animation: slide-in-from-top 600ms cubic-bezier(0.22, 1, 0.36, 1) both;
    will-change: transform, opacity;
    backface-visibility: hidden;
  }

  /* Marquee animations */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-marquee {
    animation: marquee 20s linear infinite;
    will-change: transform;
  }

  .animate-marquee-single {
    animation: marquee-single var(--marquee-duration) linear infinite;
    animation-delay: var(--marquee-delay);
    will-change: transform;
  }

  .animate-marquee-intro {
    animation: marquee-intro var(--marquee-duration) linear both;
    will-change: transform;
  }

  .marquee-viewport {
    position: relative;
    width: 100%;
  }
  .marquee-track {
    display: inline-flex;
    white-space: nowrap;
    gap: var(--marquee-gap);
  }

  @keyframes marquee-single {
    from {
      transform: translate3d(0, 0, 0);
    }
    to {
      transform: translate3d(calc(-1 * (var(--content-width) + var(--marquee-gap))), 0, 0);
    }
  }

  @keyframes marquee-intro {
    from {
      transform: translate3d(calc(var(--container-width) - 1%), 0, 0);
    }
    to {
      transform: translate3d(calc(-1 * var(--content-width)), 0, 0);
    }
  }

  /* Subtle light trace around announcement banner */
  @keyframes announcement-border-trace {
    to {
      --trace-angle: 360deg;
    }
  }
  .announcement-border-trace {
    --trace-angle: 0deg;
    border-image-source: conic-gradient(
      from var(--trace-angle),
      var(--brand-border) 0deg,
      var(--brand-border) 355deg,
      color-mix(in oklab, var(--brand-accent) 80%, var(--brand-border)) 360deg
    );
    border-image-slice: 1;
    animation: announcement-border-trace 6s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-marquee,
    .animate-marquee-single,
    .animate-marquee-intro {
      animation-duration: 0.01ms;
      animation-iteration-count: 1;
    }
    .animate-fade-in-up,
    .animate-fade-in-down,
    .animate-fade-in-opacity,
    .animate-slide-in-from-top {
      animation: none;
      opacity: 1 !important;
      transform: none !important;
    }
  }
}

